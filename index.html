<!doctype html>
<html lang="uz" data-theme="light">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="theme-color" content="#0d9488">
<title>NCCC — National Center for Climate Change</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Sora:wght@600;700;800&display=swap" rel="stylesheet">
<style>
:root{--bg:#f0f4f8;--bg2:#e2e8f0;--sf:#fff;--sf2:#f8fafc;--tx:#0f172a;--tx2:#475569;--tx3:#94a3b8;--bd:#e2e8f0;--pr:#0d9488;--prl:#ccfbf1;--prd:#0f766e;--ac:#0891b2;--acl:#cffafe;--dn:#dc2626;--dnl:#fef2f2;--wn:#d97706;--wnl:#fffbeb;--ok:#16a34a;--okl:#f0fdf4;--pu:#7c3aed;--pul:#ede9fe;--am:#d97706;--aml:#fef3c7;--ro:#e11d48;--rol:#fff1f2;--ss:0 1px 2px rgba(0,0,0,.05);--s1:0 1px 3px rgba(0,0,0,.07),0 1px 2px rgba(0,0,0,.04);--s2:0 4px 6px rgba(0,0,0,.06),0 2px 4px rgba(0,0,0,.04);--s3:0 10px 15px rgba(0,0,0,.08),0 4px 6px rgba(0,0,0,.04);--r:16px;--rs:10px;--rx:6px;--hbg:rgba(240,244,248,.82);--t:.3s cubic-bezier(.4,0,.2,1)}
[data-theme="dark"]{--bg:#0c1222;--bg2:#1a2332;--sf:#162032;--sf2:#1e2d40;--tx:#e8edf3;--tx2:#8b9bb5;--tx3:#5a6f8a;--bd:#253347;--pr:#2dd4bf;--prl:#0a2520;--prd:#5eead4;--ac:#22d3ee;--acl:#0c2a34;--dn:#f87171;--dnl:#300a0a;--wn:#fbbf24;--wnl:#2d1a03;--ok:#4ade80;--okl:#052e16;--pu:#a78bfa;--pul:#1e1540;--am:#fbbf24;--aml:#2d1a03;--ro:#fb7185;--rol:#300a15;--ss:0 1px 2px rgba(0,0,0,.3);--s1:0 1px 3px rgba(0,0,0,.35);--s2:0 4px 6px rgba(0,0,0,.3);--s3:0 10px 15px rgba(0,0,0,.35);--hbg:rgba(12,18,34,.82)}
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
body{font-family:"Inter",system-ui,sans-serif;color:var(--tx);background:var(--bg);line-height:1.6;transition:background var(--t),color var(--t);-webkit-font-smoothing:antialiased}
h1,h2,h3,h4{font-family:"Sora",sans-serif;line-height:1.3}
a{color:var(--pr);text-decoration:none;transition:color var(--t)}a:hover{color:var(--prd);text-decoration:underline}
img{max-width:100%;height:auto;display:block}
.w{width:min(1160px,100% - 2rem);margin-inline:auto}
.hdr{position:sticky;top:0;z-index:50;background:var(--hbg);backdrop-filter:blur(14px);-webkit-backdrop-filter:blur(14px);border-bottom:1px solid var(--bd);transition:background var(--t),border-color var(--t)}
.hdr .w{display:flex;align-items:center;justify-content:space-between;padding:.7rem 0;gap:.75rem}
.logo{display:flex;align-items:center;gap:.6rem;text-decoration:none;color:var(--tx);flex-shrink:0}.logo:hover{text-decoration:none;color:var(--tx)}
.logo-i{width:38px;height:38px;border-radius:10px;background:linear-gradient(135deg,var(--pr),var(--ac));display:grid;place-items:center;color:#fff;font-weight:800;font-size:1.1rem;flex-shrink:0}
.logo-t{font-weight:700;font-size:.92rem;line-height:1.25}.logo-t small{font-weight:400;font-size:.72rem;color:var(--tx2);display:block}
.hr{display:flex;align-items:center;gap:.4rem}
.nav{display:flex;align-items:center;gap:.1rem;flex-wrap:wrap}
.nav a{padding:.35rem .6rem;border-radius:var(--rx);font-size:.82rem;font-weight:500;color:var(--tx2);white-space:nowrap;transition:background var(--t),color var(--t)}
.nav a:hover,.nav a.act{background:var(--prl);color:var(--pr);text-decoration:none}
.lang{display:flex;border:1px solid var(--bd);border-radius:var(--rx);overflow:hidden}
.lang button{border:none;background:var(--sf);color:var(--tx3);padding:.3rem .5rem;font-size:.72rem;font-weight:600;cursor:pointer;transition:all var(--t);border-radius:0}
.lang button:hover{color:var(--tx)}.lang button.act{background:var(--pr);color:#fff}
.thm{background:var(--sf);border:1px solid var(--bd);border-radius:var(--rx);cursor:pointer;padding:.38rem;color:var(--tx2);display:grid;place-items:center;transition:all var(--t)}
.thm:hover{background:var(--bg2);color:var(--tx)}.thm svg{width:17px;height:17px}
.thm .si{display:none}.thm .mo{display:block}[data-theme="dark"] .thm .si{display:block}[data-theme="dark"] .thm .mo{display:none}
.ham{display:none;background:none;border:none;cursor:pointer;padding:.35rem;color:var(--tx);border-radius:var(--rx)}.ham:hover{background:var(--bg2)}.ham svg{width:21px;height:21px}
.sec{display:none;padding:1.5rem 0;animation:fi .3s ease}.sec.on{display:block}
@keyframes fi{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}
.card{background:var(--sf);border:1px solid var(--bd);border-radius:var(--r);padding:1.25rem;box-shadow:var(--ss);transition:background var(--t),border-color var(--t),box-shadow var(--t)}
.card:hover{box-shadow:var(--s1)}.card+.card{margin-top:.75rem}
.hg{display:grid;grid-template-columns:1.3fr .7fr;gap:1rem}
.hc{background:linear-gradient(135deg,#0d9488,#0369a1);color:#fff;border:none;position:relative;overflow:hidden;padding:1.5rem}
.hc::before{content:"";position:absolute;top:-40%;right:-20%;width:280px;height:280px;background:radial-gradient(circle,rgba(255,255,255,.1),transparent 70%);border-radius:50%}
.hc::after{content:"";position:absolute;bottom:-30%;left:-15%;width:200px;height:200px;background:radial-gradient(circle,rgba(255,255,255,.06),transparent 70%);border-radius:50%}
.hc h1{font-size:1.6rem;font-weight:800;margin-bottom:.5rem;position:relative;z-index:1}
.hc>p{opacity:.92;font-size:.92rem;position:relative;z-index:1;max-width:500px}
.hill{position:absolute;right:1rem;top:50%;transform:translateY(-50%);opacity:.15;z-index:0}
.hs{display:inline-flex;align-items:center;gap:.35rem;font-size:.78rem;padding:.25rem .65rem;border-radius:999px;margin-top:.8rem;position:relative;z-index:1}
.hs.ok{background:rgba(255,255,255,.2);color:#fff}.hs.wn{background:rgba(255,200,50,.25);color:#fef3c7}.hs.er{background:rgba(255,80,80,.25);color:#fecaca}
.sg{display:grid;gap:.45rem}
.sr{display:flex;justify-content:space-between;align-items:center;padding:.55rem .7rem;border:1px solid var(--bd);border-radius:var(--rs);background:var(--sf2);font-size:.84rem;transition:all var(--t);gap:.5rem}
.sr:hover{border-color:var(--pr)}.sr strong{color:var(--tx)}.sr span{color:var(--tx2);font-weight:500}
.sh{margin-bottom:1rem}.sh h2{font-size:1.2rem;margin-bottom:.2rem}.sh p{color:var(--tx2);font-size:.88rem}
.shf{display:flex;justify-content:space-between;align-items:flex-end;gap:1rem;flex-wrap:wrap;margin-bottom:1rem}
.g3{display:grid;grid-template-columns:repeat(3,1fr);gap:.75rem}
.tile{border:1px solid var(--bd);background:var(--sf2);border-radius:var(--rs);padding:1rem;transition:all var(--t);position:relative;overflow:hidden}
.tile:hover{box-shadow:var(--s1);border-color:var(--pr)}
.tile::before{content:"";position:absolute;top:0;left:0;width:3px;height:100%;background:var(--pr);opacity:0;transition:opacity var(--t)}.tile:hover::before{opacity:1}
.tile h3{font-size:.92rem;margin-bottom:.35rem}.tile p{font-size:.84rem;color:var(--tx2);margin-bottom:.45rem}
.ti{width:36px;height:36px;border-radius:var(--rx);background:var(--prl);display:grid;place-items:center;margin-bottom:.55rem;color:var(--pr)}
.ti svg{width:18px;height:18px}
.items{display:grid;gap:.55rem}
.item{border:1px solid var(--bd);border-radius:var(--rs);background:var(--sf);padding:1rem;transition:all var(--t)}
.item:hover{box-shadow:var(--s1);transform:translateY(-1px)}
.it{display:flex;justify-content:space-between;align-items:center;gap:.5rem;flex-wrap:wrap;margin-bottom:.35rem}
.item h3{font-size:.95rem}.item p{font-size:.84rem;color:var(--tx2);margin:.3rem 0}
.b{display:inline-block;font-size:.7rem;font-weight:600;padding:.14rem .48rem;border-radius:999px;border:1px solid transparent}
.bp{background:var(--prl);color:var(--pr);border-color:color-mix(in srgb,var(--pr) 25%,transparent)}
.bb{background:var(--acl);color:var(--ac);border-color:color-mix(in srgb,var(--ac) 25%,transparent)}
.bpu{background:var(--pul);color:var(--pu);border-color:color-mix(in srgb,var(--pu) 25%,transparent)}
.ba{background:var(--aml);color:var(--am);border-color:color-mix(in srgb,var(--am) 25%,transparent)}
.br{background:var(--rol);color:var(--ro);border-color:color-mix(in srgb,var(--ro) 25%,transparent)}
input,select,textarea,button{font:inherit}
input,select,textarea{width:100%;border:1px solid var(--bd);border-radius:var(--rs);background:var(--sf);color:var(--tx);padding:.5rem .65rem;font-size:.84rem;transition:border-color var(--t),background var(--t),box-shadow var(--t)}
input:focus,select:focus,textarea:focus{outline:none;border-color:var(--pr);box-shadow:0 0 0 3px color-mix(in srgb,var(--pr) 12%,transparent)}
textarea{min-height:80px;resize:vertical}.fld{display:grid;gap:.25rem;margin-bottom:.55rem}.fld label{font-size:.78rem;font-weight:600;color:var(--tx2)}
button{cursor:pointer;border:1px solid var(--bd);border-radius:var(--rs);background:var(--sf);color:var(--tx);padding:.5rem .9rem;font-weight:600;font-size:.84rem;transition:all var(--t)}
button:hover{background:var(--bg2)}
.bp2{background:linear-gradient(135deg,var(--pr),var(--ac));color:#fff;border-color:var(--pr)}.bp2:hover{opacity:.9;background:linear-gradient(135deg,var(--pr),var(--ac))}
.bd2{background:var(--dnl);color:var(--dn);border-color:var(--dn)}.bd2:hover{background:var(--dn);color:#fff}
.bsm{padding:.3rem .6rem;font-size:.78rem}.bg2{display:flex;gap:.45rem;flex-wrap:wrap}
.st{font-size:.78rem;border-radius:var(--rs);padding:.45rem .6rem;margin-top:.45rem;display:flex;align-items:center;gap:.35rem}
.st.ok{background:var(--okl);color:var(--ok);border:1px solid color-mix(in srgb,var(--ok) 20%,transparent)}
.st.wn{background:var(--wnl);color:var(--wn);border:1px solid color-mix(in srgb,var(--wn) 20%,transparent)}
.st.er{background:var(--dnl);color:var(--dn);border:1px solid color-mix(in srgb,var(--dn) 20%,transparent)}
.tabs{display:flex;gap:.2rem;margin-bottom:.8rem;border-bottom:1px solid var(--bd);overflow-x:auto}
.tb{border:none;background:none;padding:.5rem .8rem;font-weight:600;color:var(--tx2);border-bottom:2px solid transparent;border-radius:0;cursor:pointer;font-size:.82rem;transition:all var(--t);white-space:nowrap}
.tb:hover{color:var(--tx);background:none}.tb.act{color:var(--pr);border-bottom-color:var(--pr)}
.tp{display:none}.tp.on{display:block}
.ag{display:grid;grid-template-columns:1fr 1fr;gap:.7rem}
.pc{color:var(--tx);line-height:1.7}.pc p{margin-bottom:.5rem}
.pc img,.pb img{max-width:100%;height:auto;border-radius:var(--rs);margin:.5rem 0}
.pc table,.pb table{width:100%;border-collapse:collapse;margin:.5rem 0}
.pc td,.pc th,.pb td,.pb th{border:1px solid var(--bd);padding:.4rem .6rem;font-size:.84rem}
.ig{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:.45rem;margin-top:.5rem}
.ig img{width:100%;height:150px;object-fit:cover;border:1px solid var(--bd);border-radius:var(--rs);transition:transform .2s}.ig img:hover{transform:scale(1.03)}
.sl{list-style:none;display:grid;gap:.45rem}
.sl li{border:1px solid var(--bd);border-radius:var(--rs);padding:.65rem .8rem;background:var(--sf2);font-size:.84rem;transition:all var(--t);display:flex;justify-content:space-between;align-items:start;gap:.5rem}
.sl li:hover{border-color:var(--pr)}.sl li strong{display:block;margin-bottom:.15rem}
.si2{flex:1;min-width:0}.si2 a{word-break:break-all}
.phd{margin-bottom:1.2rem}.phd h1{font-size:1.4rem;margin-bottom:.3rem}
.pm{color:var(--tx2);font-size:.82rem;display:flex;gap:1rem;align-items:center}
.bl{display:inline-flex;align-items:center;gap:.3rem;font-size:.84rem;font-weight:500;margin-bottom:1rem}
.pb{line-height:1.8;font-size:.92rem}.pb p{margin-bottom:.7rem}
.pgc{border:1px solid var(--bd);border-radius:var(--rs);padding:1rem;background:var(--sf);transition:all var(--t)}
.pgc:hover{box-shadow:var(--s1);transform:translateY(-1px)}
.pgc h3{font-size:.95rem;margin-bottom:.25rem}.pgc .slug{font-size:.78rem;color:var(--tx3);font-family:monospace}
.pgc time{font-size:.78rem;color:var(--tx2)}.pgca{display:flex;gap:.4rem;margin-top:.5rem}
.ft{display:flex;gap:.45rem;flex-wrap:wrap}.ft input,.ft select{width:auto;min-width:150px}
.mu{color:var(--tx2);font-size:.88rem}.ms{color:var(--tx3);font-size:.8rem}
.ftr{border-top:1px solid var(--bd);margin-top:2rem;padding:1.5rem 0;transition:border-color var(--t)}
.fg{display:grid;grid-template-columns:1.2fr 1fr 1fr;gap:1.5rem}
.fg h4{font-size:.85rem;margin-bottom:.5rem;color:var(--tx)}.fg p,.fg a{font-size:.82rem;color:var(--tx3)}
.fg nav{display:flex;flex-direction:column;gap:.3rem}
.fb{border-top:1px solid var(--bd);margin-top:1rem;padding-top:.8rem;font-size:.78rem;color:var(--tx3);display:flex;justify-content:space-between;flex-wrap:wrap;gap:.5rem}
.tc{position:fixed;top:1rem;right:1rem;z-index:100;display:grid;gap:.35rem}
.toast{padding:.55rem .9rem;border-radius:var(--rs);font-size:.82rem;font-weight:500;box-shadow:var(--s3);animation:ti2 .3s ease;color:#fff}
.toast.ok{background:var(--ok)}.toast.er{background:var(--dn)}.toast.wn{background:var(--wn);color:#000}
@keyframes ti2{from{opacity:0;transform:translateX(30px)}to{opacity:1;transform:translateX(0)}}
.hid{display:none!important}
@media(max-width:860px){.hg,.g3,.ag,.fg,.env-grid,.fc-grid{grid-template-columns:1fr}.hdr .w{flex-wrap:wrap}.nav{display:none;position:absolute;top:100%;left:0;right:0;background:var(--sf);border-bottom:1px solid var(--bd);flex-direction:column;padding:.5rem;box-shadow:var(--s2);z-index:40}.nav.open{display:flex}.nav a{padding:.55rem .75rem}.ham{display:block}.sec{padding:1rem 0}}
@media print{body *{visibility:hidden}#printArea,#printArea *{visibility:visible}#printArea{position:absolute;inset:0;background:#fff;color:#000;padding:20px}#printArea img{max-width:100%;height:auto}}
.acc-hd{display:flex;justify-content:space-between;align-items:center;gap:.5rem;cursor:pointer;user-select:none}
.acc-bd{display:none;border-top:1px solid var(--bd);padding:.75rem 0;margin-top:.65rem}.item.acc.open .acc-bd{display:block}
.acc-tg{transition:transform .2s;flex-shrink:0;color:var(--tx3)}.item.acc.open .acc-tg{transform:rotate(180deg)}
.wv{font-size:1.5rem;font-weight:700;color:var(--pr);font-family:"Sora",sans-serif;line-height:1.2;margin-bottom:.15rem}.wu{font-size:.75rem;color:var(--tx3);font-weight:400;margin-left:.15rem}
.env-grid{display:grid;grid-template-columns:1fr 1fr;gap:.75rem}
.gc-link{display:inline-flex;align-items:center;gap:.35rem;font-weight:600;font-size:.88rem;padding:.45rem .9rem;border-radius:var(--rx);background:var(--prl);color:var(--pr);transition:all var(--t);text-decoration:none}.gc-link:hover{background:var(--pr);color:#fff;text-decoration:none}
.aq-cir{width:82px;height:82px;border-radius:50%;display:flex;flex-direction:column;align-items:center;justify-content:center;color:#fff;font-family:"Sora",sans-serif;flex-shrink:0}.aq-n{font-size:1.7rem;font-weight:800;line-height:1}.aq-l{font-size:.55rem;font-weight:600;opacity:.9;text-transform:uppercase;margin-top:2px}
.wt-bg{padding:.75rem;border-radius:var(--rs);background:linear-gradient(135deg,var(--prl),var(--acl));margin-bottom:.7rem}
.fc-grid{display:grid;grid-template-columns:repeat(5,1fr);gap:.35rem}.fc-day{text-align:center;padding:.45rem .25rem;border:1px solid var(--bd);border-radius:var(--rx);background:var(--sf2);transition:all var(--t)}.fc-day:hover{border-color:var(--pr)}
.crs{overflow:hidden}.crs-t{display:flex;gap:.6rem;overflow-x:auto;scroll-behavior:smooth;scrollbar-width:none;padding:.2rem 0}.crs-t::-webkit-scrollbar{display:none}
.crs-c{min-width:260px;max-width:300px;flex-shrink:0;border:1px solid var(--bd);border-radius:var(--rs);padding:.8rem;background:var(--sf);transition:all var(--t);text-decoration:none;color:var(--tx);display:block}
.crs-c:hover{box-shadow:var(--s1);border-color:var(--pr);text-decoration:none;transform:translateY(-2px)}.crs-c h4{font-size:.84rem;font-family:"Sora",sans-serif;line-height:1.35;margin-bottom:.35rem;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}
.rfb{display:inline-flex;align-items:center;gap:.3rem}.rfb svg{width:14px;height:14px}.rfb.ld svg{animation:rsp .7s linear infinite}@keyframes rsp{to{transform:rotate(360deg)}}
</style>
</head>
<body>
<div class="tc" id="toasts"></div>
<header class="hdr"><div class="w">
<a href="#home" class="logo"><div class="logo-i">N</div><div class="logo-t" id="logoT">Milliy markaz<small>Iqlim o'zgarishi bo'yicha</small></div></a>
<div class="hr">
<nav class="nav" id="nav"></nav>
<div class="lang" id="ls"><button data-lang="uz" class="act">O'z</button><button data-lang="ru">Рус</button><button data-lang="en">En</button></div>
<button class="thm" id="thm"><svg class="mo" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg><svg class="si" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button>
<button class="ham" id="hmb" aria-label="Menu"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button>
</div></div></header>

<main class="w">
<section id="s-home" class="sec">
<div class="hg">
<div class="card hc">
<svg class="hill" width="180" height="180" viewBox="0 0 240 240" fill="none"><circle cx="120" cy="120" r="90" stroke="rgba(255,255,255,.15)" stroke-width="1.5"/><circle cx="120" cy="120" r="65" stroke="rgba(255,255,255,.1)" stroke-width="1"/><ellipse cx="120" cy="120" rx="90" ry="32" stroke="rgba(255,255,255,.1)" stroke-width="1"/><ellipse cx="120" cy="120" rx="38" ry="90" stroke="rgba(255,255,255,.08)" stroke-width="1" transform="rotate(25 120 120)"/><path d="M108 78Q120 55 132 78Q120 101 108 78Z" fill="rgba(255,255,255,.1)"/><circle cx="85" cy="105" r="3" fill="rgba(255,255,255,.2)"/><circle cx="155" cy="100" r="3" fill="rgba(255,255,255,.2)"/><circle cx="105" cy="145" r="2.5" fill="rgba(255,255,255,.15)"/></svg>
<h1 id="hT"></h1><p id="hD"></p><div id="ds" class="hs wn"></div>
</div>
<div class="card"><h3 id="stT" style="font-size:.95rem;margin-bottom:.6rem"></h3>
<div class="sg"><div class="sr"><strong id="sUL"></strong><span id="sU">-</span></div><div class="sr"><strong id="sDL"></strong><span id="sD">-</span></div><div class="sr"><strong id="sNL"></strong><span id="sN">-</span></div><div class="sr"><strong id="sPL"></strong><span id="sP">-</span></div></div>
</div></div>
<div class="card" style="margin-top:.75rem"><div class="sh"><h2 id="hlT"></h2><p id="hO" class="mu"></p></div><div id="hl" class="g3"></div></div>
<div class="card" style="margin-top:.75rem"><div class="shf"><div><h2 id="wdT"></h2><p id="wdS" class="mu"></p></div></div><div id="wdG" class="g3"><p class="mu" id="wdL"></p></div></div>
<div class="env-grid" style="margin-top:.75rem">
<div class="card"><div class="sh"><h2 id="aqT"></h2><p id="aqS" class="mu"></p></div><div id="aqW"></div></div>
<div class="card"><div class="sh"><h2 id="wtT"></h2><p id="wtS" class="mu"></p></div><div id="wtW"></div></div>
</div>
<div class="card" style="margin-top:.75rem"><div class="shf"><div><h2 id="fdT"></h2><p id="fdS" class="mu"></p></div><button class="bsm bp2 rfb" id="fdR" type="button"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="23 4 23 10 17 10"/><path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/></svg></button></div><div id="fdC" class="crs"><div class="crs-t" id="fdTr"></div></div></div>
<div class="card" style="margin-top:.75rem"><div class="sh"><h2 id="gcT"></h2><p id="gcS" class="mu"></p></div><p id="gcD" class="mu" style="margin-bottom:.75rem"></p><a href="https://greencities.uz" target="_blank" rel="noopener noreferrer" id="gcL" class="gc-link">greencities.uz &rarr;</a></div>
</section>

<section id="s-about" class="sec"><div class="card"><div class="sh"><h2 id="abT"></h2><p id="abO" class="mu"></p></div><p id="abD" class="mu" style="margin-bottom:1rem"></p><div id="abH" class="g3"></div></div></section>

<section id="s-decisions" class="sec"><div class="card"><div class="sh"><h2 id="dcT"></h2><p id="dcS" class="mu"></p></div><div id="dcL" class="items"></div></div></section>

<section id="s-news" class="sec"><div class="card"><div class="shf"><div><h2 id="nwT"></h2><p id="nwS" class="mu"></p></div><div class="ft"><input id="qi" type="search"><select id="tf"></select></div></div><div id="nwL" class="items"></div></div></section>

<section id="s-pages" class="sec"><div class="card"><div class="sh"><h2 id="pgT"></h2><p id="pgS" class="mu"></p></div><div id="pgL" class="items"></div></div></section>

<section id="s-page-view" class="sec"><div class="card"><a href="#pages" class="bl" id="bkL">&larr;</a><div class="phd"><h1 id="pvT"></h1><div class="pm"><time id="pvD"></time><span id="pvS" class="ms"></span></div></div><div id="pvB" class="pb"></div><div id="pvI" class="ig"></div></div></section>

<section id="s-admin" class="sec">
<div class="card">
<div class="sh"><h2 id="adT"></h2><p id="adS" class="mu"></p></div>
<div id="adG" style="margin-top:.7rem"><div class="item" style="max-width:400px">
<h3 id="adLT" style="font-size:.95rem;margin-bottom:.55rem"></h3>
<form id="lf"><div class="fld"><label for="lu" id="lU"></label><input id="lu" required autocomplete="username"></div><div class="fld"><label for="lp" id="lP"></label><input id="lp" type="password" required autocomplete="current-password"></div><button class="bp2" type="submit" id="lB"></button></form>
<div id="lM" class="st wn"></div></div></div>
<div id="adP" class="hid" style="margin-top:.7rem">
<div class="tabs" id="atb"></div>
<div class="ag">
<div id="t1" class="tp on">
<h3 style="font-size:.95rem;margin-bottom:.55rem" id="t1T"></h3>
<form id="pf"><div class="fld"><label for="pt" id="l1"></label><input id="pt" required></div><div class="fld"><label for="pd" id="l2"></label><input id="pd" type="file" accept=".docx,.txt,.doc"></div><div class="fld"><label for="pi" id="l3"></label><input id="pi" type="file" accept="image/*" multiple></div><div class="fld"><label for="pn" id="l4"></label><textarea id="pn"></textarea></div><div class="bg2"><button id="ppb" type="button"></button><button class="bp2" type="submit" id="psb"></button><button id="cpb" type="button" class="hid"></button><button id="lob" type="button"></button></div></form>
<p class="ms" style="margin-top:.4rem" id="pfn"></p></div>
<div id="t2" class="tp">
<h3 style="font-size:.95rem;margin-bottom:.55rem" id="t2T"></h3>
<form id="gf"><div class="fld"><label for="gt" id="g1"></label><input id="gt" required></div><div class="fld"><label for="gs" id="g2"></label><input id="gs" required></div><div class="fld"><label for="gd" id="g3l"></label><input id="gd" type="file" accept=".docx,.txt,.doc"></div><div class="fld"><label for="gi" id="g4"></label><input id="gi" type="file" accept="image/*" multiple></div><div class="fld"><label for="gn" id="g5"></label><textarea id="gn"></textarea></div><div class="bg2"><button id="gpb" type="button"></button><button class="bp2" type="submit" id="gsb"></button><button id="cgb" type="button" class="hid"></button></div></form></div>
<div id="t3" class="tp">
<h3 style="font-size:.95rem;margin-bottom:.55rem" id="t3T"></h3>
<form id="sf"><div class="fld"><label for="st2" id="s1"></label><input id="st2" required></div><div class="fld"><label for="su" id="s2"></label><input id="su" type="url" required placeholder="https://..."></div><button class="bp2" type="submit" id="ssb"></button></form></div>
<div><h3 style="font-size:.95rem;margin-bottom:.55rem" id="pvTT"></h3><div id="pvP" class="pc mu"></div></div>
</div></div></div>
<div class="card" style="margin-top:.7rem"><div class="sh"><h2 id="puT"></h2><p id="puS" class="mu"></p></div><div id="puL" class="items"></div></div>
</section>

<section id="s-pubs" class="sec"><div class="card"><div class="sh"><h2 id="pbT"></h2><p id="pbS" class="mu"></p></div><div id="pbL" class="items"></div></div></section>

<section id="s-sources" class="sec"><div class="card"><div class="sh"><h2 id="scT"></h2><p id="scS" class="mu"></p></div><ul id="scL" class="sl"></ul></div></section>
</main>

<div id="printArea" class="hid"></div>
<footer class="ftr"><div class="w"><div class="fg"><div><div class="logo" style="margin-bottom:.6rem;pointer-events:none"><div class="logo-i">N</div><div class="logo-t" id="fL"></div></div><p id="fD" class="ms"></p></div><div><h4 id="fNT"></h4><nav id="fN"></nav></div><div><h4 id="fIT"></h4><p id="fNo" class="ms"></p></div></div><div class="fb"><span id="fC"></span><span id="fP" class="ms"></span></div></div></footer>

<script src="https://unpkg.com/mammoth/mammoth.browser.min.js"></script>
<script>
(function(){
"use strict";
var L={
uz:{logo:["Milliy markaz","Iqlim o'zgarishi bo'yicha"],nav:{home:"Bosh sahifa",about:"Markaz",decisions:"Qarorlar",news:"Yangiliklar",pages:"Sahifalar",pubs:"Nashrlar",sources:"Manbalar",admin:"Admin"},hT:"Iqlim o'zgarishi bo'yicha Milliy markaz",stT:"Asosiy ko'rsatkichlar",sU:"Oxirgi yangilanish",sD:"Qarorlar",sN:"Yangiliklar",sP:"Sahifalar",hlT:"Asosiy yo'nalishlar",src:"Manba",noHL:"Ma'lumot topilmadi.",abT:"Milliy markaz haqida",dcT:"So'nggi iqlim va atmosfera qarorlari",dcS:"Aniq sanalar bo'yicha tartiblangan.",noDc:"Qarorlar topilmadi.",nwT:"Yangiliklar",nwS:"Qidiruv va teg filter.",sch:"Qidiruv...",aT:"Barcha teglar",noNw:"Natija topilmadi.",tags:{kadr:"Kadr",institut:"Institut",atmosfera:"Atmosfera",reyting:"Reyting"},pgT:"Sahifalar",pgS:"Administrator tomonidan yaratilgan sahifalar.",noPg:"Hozircha sahifa yo'q.",opn:"Ochish",del:"O'chirish",bk:"Barcha sahifalar",dlC:"Bu sahifani o'chirishni xohlaysizmi?",adT:"Administrator paneli",adS:"Nashr, sahifa va manba boshqaruvi.",adL:"Admin kirishi",usr:"Login",pwd:"Parol",lBtn:"Kirish",lCl:"Admin holati yopiq.",lOk:"Admin kirishi muvaffaqiyatli.",lEr:"Login yoki parol xato.",loM:"Sessiya yopildi.",lo:"Chiqish",tb1:"Nashr qilish",tb2:"Sahifa yaratish",tb3:"Manba qo'shish",t1T:"Word hujjatdan nashr",ttl:"Sarlavha",fl:"Word (.docx) yoki txt",img:"Rasmlar",nt:"Izoh",pv:"Preview",sPb:"Nashrni saqlash",fNt:".doc qo'llab-quvvatlanmaydi, .docx tavsiya etiladi.",t2T:"Yangi sahifa",slg:"Slug (URL)",slP:"masalan: yangilik-sahifasi",tFl:"Matn fayli (.docx / .txt)",sPg:"Sahifani saqlash",t3T:"Yangi manba qo'shish",sT:"Manba sarlavhasi",sU2:"URL manzili",aSr:"Manbani qo'shish",pvT:"Preview",pvE:"Preview hali tayyorlanmagan.",puT:"Nashrlar",puS:"Saqlangan nashrlar.",noPu:"Nashr yo'q.",pr:"Chop etish",scT:"Ishlatilgan manbalar",scS:"Quyidagi havolalardan olindi.",noSc:"Manbalar bo'sh.",fNT:"Tezkor havolalar",fIT:"Ma'lumot",fNo:"Bu statik demo. Real loyiha uchun server autentifikatsiyasi shart.",fC:"Milliy markaz — O'zbekiston",fP:"Statik veb-sayt",dLd:"Ma'lumotlar yuklanmoqda...",dOk:"Yuklandi.",dEr:"Yuklanmadi",noTx:"Matn yo'q.",tR:"Sarlavha majburiy.",slR:"Slug majburiy.",slE:"Bu slug ishlatilgan",pE:"Matn bo'sh.",pSv:"Nashr saqlandi.",pgSv:"Sahifa saqlandi",sSv:"Manba qo'shildi.",sEm:"Sarlavha va URL majburiy.",dxE:".doc ni .docx ga aylantiring.",flE:"Faqat .docx yoki .txt.",prE:"Parser yuklanmadi.",iE:"Rasm o'qilmadi",aO:"Faqat admin uchun.",pNF:"Topilmadi.",edt:"Tahrirlash",dlPu:"Bu nashrni o'chirishni xohlaysizmi?",upd:"Yangilash",cncl:"Bekor qilish",pbPT:"Nashrlar",pbPS:"Saqlangan nashrlar.",edMode:"Tahrirlash rejimi",wdT:"Jahon banki ma'lumotlari",wdS:"O'zbekiston ekologik ko'rsatkichlari",wd_co2pc:"CO\u2082 jon boshiga",wd_co2kt:"CO\u2082 umumiy",wd_renew:"Qayta tiklanadigan energiya",wd_forest:"O'rmon maydoni",wd_pop:"Aholi soni",wd_pm25:"PM2.5 ifloslanish",cDesc:"Milliy markaz iqlim siyosati, shaharlar ekologik reytingi, iqlimga moslashuv va tarmoqlar kesimidagi tahliliy ishlarni olib boradi.",cOrg:"O'zbekiston Respublikasi Ekologiya va iqlim o'zgarishi milliy qo'mitasi tizimi",hls:[{title:"Green Cities Rating taqdimoti",detail:"2024-07-13 kuni 14 ta ma'muriy markaz uchun ekologik barqarorlik reytingi e'lon qilingan."},{title:"Ekologik master-rejalar",detail:"Buxoro va Samarqand uchun dastlabki ekologik master-rejalar ishlab chiqilgan."},{title:"Rasmiy boshqaruv tizimi yangilandi",detail:"2025-11-19 qarori bilan yangi institutsional model va monitoring talablari belgilandi."}],gcT:"Green Cities reyting",gcS:"14 ta ma'muriy markaz ekologik barqarorlik reytingi",gcD:"Green Cities platformasi shaharlarning ekologik holatini baholash, yashil infratuzilmani rivojlantirish va ekologik barqarorlik reytingini yuritish uchun yaratilgan.",gcL:"Batafsil",aqT:"Toshkent havo sifati",aqS:"Real vaqtda havo sifati indeksi",wtT:"Ob-havo",wtS:"Toshkent ob-havo ma'lumoti",fdT:"Ekologik yangiliklar",fdS:"O'zbekiston ekologiyasi bo'yicha so'nggi xabarlar",fdR:"Yangilash",fdN:"Yangilik topilmadi."},
ru:{logo:["Национальный центр","По изменению климата"],nav:{home:"Главная",about:"О центре",decisions:"Решения",news:"Новости",pages:"Страницы",pubs:"Публикации",sources:"Источники",admin:"Админ"},hT:"Национальный центр по изменению климата",stT:"Основные показатели",sU:"Обновление",sD:"Решения",sN:"Новости",sP:"Страницы",hlT:"Основные направления",src:"Источник",noHL:"Данные не найдены.",abT:"О Национальном центре",dcT:"Последние решения по климату",dcS:"Отсортированы по дате.",noDc:"Решения не найдены.",nwT:"Новости",nwS:"Поиск и фильтр.",sch:"Поиск...",aT:"Все теги",noNw:"Ничего не найдено.",tags:{kadr:"Кадры",institut:"Институт",atmosfera:"Атмосфера",reyting:"Рейтинг"},pgT:"Страницы",pgS:"Страницы администратора.",noPg:"Страниц пока нет.",opn:"Открыть",del:"Удалить",bk:"Все страницы",dlC:"Удалить страницу?",adT:"Панель администратора",adS:"Публикации, страницы и источники.",adL:"Вход администратора",usr:"Логин",pwd:"Пароль",lBtn:"Войти",lCl:"Панель закрыта.",lOk:"Вход выполнен.",lEr:"Неверные данные.",loM:"Сессия завершена.",lo:"Выход",tb1:"Публикация",tb2:"Создать страницу",tb3:"Добавить источник",t1T:"Публикация из Word",ttl:"Заголовок",fl:"Word (.docx) или txt",img:"Изображения",nt:"Заметка",pv:"Предпросмотр",sPb:"Сохранить",fNt:".doc не поддерживается, используйте .docx.",t2T:"Новая страница",slg:"Slug (URL)",slP:"например: novaya-stranica",tFl:"Текстовый файл",sPg:"Сохранить страницу",t3T:"Добавить источник",sT:"Название",sU2:"URL адрес",aSr:"Добавить",pvT:"Предпросмотр",pvE:"Не готов.",puT:"Публикации",puS:"Сохранённые публикации.",noPu:"Публикаций нет.",pr:"Печать",scT:"Использованные источники",scS:"Факты из следующих источников.",noSc:"Источников нет.",fNT:"Быстрые ссылки",fIT:"Информация",fNo:"Статичная демо-версия.",fC:"Нац. центр — Узбекистан",fP:"Статический сайт",dLd:"Загрузка...",dOk:"Загружено.",dEr:"Не загружено",noTx:"Текст отсутствует.",tR:"Заголовок обязателен.",slR:"Slug обязателен.",slE:"Slug занят",pE:"Текст пуст.",pSv:"Сохранено.",pgSv:"Страница сохранена",sSv:"Источник добавлен.",sEm:"Заполните все поля.",dxE:"Конвертируйте в .docx.",flE:"Только .docx или .txt.",prE:"Парсер не загружен.",iE:"Ошибка чтения",aO:"Только для админа.",pNF:"Не найдено.",edt:"Редактировать",dlPu:"Удалить публикацию?",upd:"Обновить",cncl:"Отмена",pbPT:"Публикации",pbPS:"Сохранённые публикации.",edMode:"Режим редактирования",wdT:"Данные Всемирного банка",wdS:"Экологические показатели Узбекистана",wd_co2pc:"CO\u2082 на душу населения",wd_co2kt:"CO\u2082 всего",wd_renew:"Возобновляемая энергия",wd_forest:"Лесной покров",wd_pop:"Население",wd_pm25:"PM2.5 загрязнение воздуха",cDesc:"Национальный центр ведёт аналитическую работу в области климатической политики, экологического рейтинга городов, адаптации к изменению климата и отраслевого анализа.",cOrg:"Система Национального комитета по экологии и изменению климата Республики Узбекистан",hls:[{title:"Презентация Green Cities Rating",detail:"13 июля 2024 г. представлен рейтинг экологической устойчивости 14 административных центров."},{title:"Экологические мастер-планы",detail:"Разработаны первоначальные экологические мастер-планы для Бухары и Самарканда."},{title:"Обновление системы управления",detail:"Решением от 19.11.2025 установлена новая институциональная модель и требования к мониторингу."}],gcT:"Рейтинг Green Cities",gcS:"Экологический рейтинг 14 административных центров",gcD:"Платформа Green Cities создана для оценки экологического состояния городов, развития зелёной инфраструктуры и ведения рейтинга экологической устойчивости.",gcL:"Подробнее",aqT:"Качество воздуха в Ташкенте",aqS:"Индекс качества воздуха в реальном времени",wtT:"Погода",wtS:"Прогноз погоды в Ташкенте",fdT:"Экологические новости",fdS:"Последние новости по экологии Узбекистана",fdR:"Обновить",fdN:"Новостей не найдено."},
en:{logo:["National Center","for Climate Change"],nav:{home:"Home",about:"About",decisions:"Decisions",news:"News",pages:"Pages",pubs:"Publications",sources:"Sources",admin:"Admin"},hT:"National Center for Climate Change",stT:"Key Indicators",sU:"Last Updated",sD:"Decisions",sN:"News",sP:"Pages",hlT:"Key Directions",src:"Source",noHL:"No data found.",abT:"About the Center",dcT:"Latest Climate Decisions",dcS:"Sorted by date.",noDc:"No decisions.",nwT:"News",nwS:"Search and filter.",sch:"Search...",aT:"All tags",noNw:"No results.",tags:{kadr:"Personnel",institut:"Institute",atmosfera:"Atmosphere",reyting:"Rating"},pgT:"Pages",pgS:"Admin-created pages.",noPg:"No pages yet.",opn:"Open",del:"Delete",bk:"All pages",dlC:"Delete this page?",adT:"Admin Panel",adS:"Manage publications, pages & sources.",adL:"Admin Login",usr:"Username",pwd:"Password",lBtn:"Login",lCl:"Panel closed.",lOk:"Login successful.",lEr:"Invalid credentials.",loM:"Session ended.",lo:"Logout",tb1:"Publish",tb2:"Create Page",tb3:"Add Source",t1T:"Publish from Word",ttl:"Title",fl:"Word (.docx) or txt",img:"Images",nt:"Note",pv:"Preview",sPb:"Save",fNt:"Use .docx format.",t2T:"New Page",slg:"Slug (URL)",slP:"e.g. new-page",tFl:"Text file",sPg:"Save Page",t3T:"Add New Source",sT:"Source title",sU2:"URL",aSr:"Add Source",pvT:"Preview",pvE:"Not ready.",puT:"Publications",puS:"Saved publications.",noPu:"No publications.",pr:"Print",scT:"Sources Used",scS:"Facts from these sources.",noSc:"No sources.",fNT:"Quick Links",fIT:"Information",fNo:"Static demo site.",fC:"NCCC — Uzbekistan",fP:"Static website",dLd:"Loading...",dOk:"Loaded.",dEr:"Failed to load",noTx:"No text.",tR:"Title required.",slR:"Slug required.",slE:"Slug taken",pE:"Text empty.",pSv:"Saved.",pgSv:"Page saved",sSv:"Source added.",sEm:"Fill all fields.",dxE:"Convert to .docx.",flE:"Only .docx or .txt.",prE:"Parser not loaded.",iE:"Image error",aO:"Admin only.",pNF:"Not found.",edt:"Edit",dlPu:"Delete this publication?",upd:"Update",cncl:"Cancel",pbPT:"Publications",pbPS:"Saved publications.",edMode:"Editing",wdT:"World Bank Data",wdS:"Uzbekistan Environmental Indicators",wd_co2pc:"CO\u2082 per Capita",wd_co2kt:"CO\u2082 Total Emissions",wd_renew:"Renewable Energy",wd_forest:"Forest Cover",wd_pop:"Population",wd_pm25:"PM2.5 Air Pollution",cDesc:"The National Center conducts analytical work on climate policy, urban environmental ratings, climate adaptation, and cross-sectoral analysis.",cOrg:"System of the National Committee on Ecology and Climate Change of the Republic of Uzbekistan",hls:[{title:"Green Cities Rating Presentation",detail:"On July 13, 2024, the environmental sustainability rating for 14 administrative centers was announced."},{title:"Environmental Master Plans",detail:"Initial environmental master plans were developed for Bukhara and Samarkand."},{title:"Management System Update",detail:"A decree of November 19, 2025 established a new institutional model and monitoring requirements."}],gcT:"Green Cities Rating",gcS:"Environmental sustainability rating of 14 administrative centers",gcD:"The Green Cities platform was created to assess the environmental condition of cities, develop green infrastructure, and maintain sustainability ratings.",gcL:"Learn more",aqT:"Tashkent Air Quality",aqS:"Real-time Air Quality Index",wtT:"Weather",wtS:"Tashkent weather forecast",fdT:"Environmental News",fdS:"Latest ecology news from Uzbekistan",fdR:"Refresh",fdN:"No news found."}
};

var cb=function(c){c=(c||"").toLowerCase();if(c.includes("atmosfer"))return"bb";if(c.includes("xalqaro")||c.includes("international"))return"bpu";if(c.includes("global"))return"ba";if(c.includes("siyosiy")||c.includes("polit"))return"br";return"bp"};
var tb2=function(t){t=(t||"").toLowerCase();return t==="kadr"?"bb":t==="institut"?"bpu":t==="reyting"?"ba":"bp"};

var U="uzncc",P="bunyodkor7a",SK="nccc_admin_v2",PK="nccc_pubs_v2",GK="nccc_pages_v2",TK="nccc_theme_v1",LK="nccc_lang_v1",CK="nccc_csrc_v1";
var DD={lastUpdated:"2026-02-12",center:{description:"",parentOrg:"",highlights:[]},decisions:[],news:[],sources:[]};
var data=DD,adm=localStorage.getItem(SK)==="1",lang="uz",rt="home",ePub=null,ePg=null;
var $=function(i){return document.getElementById(i)};
var t=function(k){return L[lang][k]||L.uz[k]||k};
var tn=function(k){return(L[lang].nav||{})[k]||k};
var tt=function(k){return((L[lang].tags||{}))[k]||k};

document.addEventListener("DOMContentLoaded",init);
async function init(){initTheme();initLang();await loadData();applyI18n();renderAll();bindEv();admSt();doRoute();window.addEventListener("hashchange",doRoute);loadWD();loadWeather();loadAQ();loadFeed()}
function initTheme(){var s=localStorage.getItem(TK),d=matchMedia("(prefers-color-scheme:dark)").matches;document.documentElement.setAttribute("data-theme",s||(d?"dark":"light"))}
function togTheme(){var c=document.documentElement.getAttribute("data-theme"),n=c==="dark"?"light":"dark";document.documentElement.setAttribute("data-theme",n);localStorage.setItem(TK,n)}
function initLang(){lang=localStorage.getItem(LK)||"uz";updLB()}
function setLang(l){lang=l;localStorage.setItem(LK,l);document.documentElement.lang=l;updLB();applyI18n();renderAll();loadWeather();loadAQ();loadFeed()}
function updLB(){document.querySelectorAll(".lang button").forEach(function(b){b.classList.toggle("act",b.dataset.lang===lang)})}

function applyI18n(){
var l=L[lang];
$("logoT").innerHTML=h(l.logo[0])+"<small>"+h(l.logo[1])+"</small>";
$("fL").innerHTML=h(l.logo[0])+"<small>"+h(l.logo[1])+"</small>";
$("nav").innerHTML=Object.entries(l.nav).map(function(e){return'<a href="#'+e[0]+'" data-r="'+e[0]+'">'+h(e[1])+"</a>"}).join("");
$("fN").innerHTML=Object.entries(l.nav).map(function(e){return'<a href="#'+e[0]+'">'+h(e[1])+"</a>"}).join("");
$("hT").textContent=l.hT;$("stT").textContent=l.stT;
$("sUL").textContent=l.sU;$("sDL").textContent=l.sD;$("sNL").textContent=l.sN;$("sPL").textContent=l.sP;
$("hlT").textContent=l.hlT;$("abT").textContent=l.abT;
$("dcT").textContent=l.dcT;$("dcS").textContent=l.dcS;
$("nwT").textContent=l.nwT;$("nwS").textContent=l.nwS;$("qi").placeholder=l.sch;
$("tf").innerHTML='<option value="all">'+h(l.aT)+"</option>"+["kadr","institut","atmosfera","reyting"].map(function(tg){return'<option value="'+tg+'">'+h(tt(tg))+"</option>"}).join("");
$("pgT").textContent=l.pgT;$("pgS").textContent=l.pgS;$("bkL").innerHTML="&larr; "+h(l.bk);
$("adT").textContent=l.adT;$("adS").textContent=l.adS;$("adLT").textContent=l.adL;
$("lU").textContent=l.usr;$("lP").textContent=l.pwd;$("lB").textContent=l.lBtn;$("lM").textContent=adm?l.lOk:l.lCl;
$("atb").innerHTML=[["t1",l.tb1],["t2",l.tb2],["t3",l.tb3]].map(function(e,i){return'<button class="tb'+(i===0?" act":"")+'" data-t="'+e[0]+'">'+h(e[1])+"</button>"}).join("");
bindTabs();
$("t1T").textContent=l.t1T;$("l1").textContent=l.ttl;$("l2").textContent=l.fl;$("l3").textContent=l.img;$("l4").textContent=l.nt;
$("ppb").textContent=l.pv;$("psb").textContent=l.sPb;$("lob").textContent=l.lo;$("pfn").textContent=l.fNt;
$("t2T").textContent=l.t2T;$("g1").textContent=l.ttl;$("g2").textContent=l.slg;$("gs").placeholder=l.slP;
$("g3l").textContent=l.tFl;$("g4").textContent=l.img;$("g5").textContent=l.nt;
$("gpb").textContent=l.pv;$("gsb").textContent=l.sPg;
$("t3T").textContent=l.t3T;$("s1").textContent=l.sT;$("s2").textContent=l.sU2;$("ssb").textContent=l.aSr;
$("pvTT").textContent=l.pvT;$("pvP").innerHTML="<span class='mu'>"+h(l.pvE)+"</span>";
$("puT").textContent=l.puT;$("puS").textContent=l.puS;
$("wdT").textContent=l.wdT;$("wdS").textContent=l.wdS;
$("pbT").textContent=l.pbPT;$("pbS").textContent=l.pbPS;
$("scT").textContent=l.scT;$("scS").textContent=l.scS;
$("fNT").textContent=l.fNT;$("fIT").textContent=l.fIT;$("fNo").textContent=l.fNo;
$("fC").textContent="\u00A9 2026 "+l.fC;$("fP").textContent=l.fP;
$("fD").textContent=l.cDesc||data.center.description||l.hT;
$("gcT").textContent=l.gcT;$("gcS").textContent=l.gcS;$("gcD").textContent=l.gcD;$("gcL").innerHTML=h(l.gcL)+' &rarr;';
$("aqT").textContent=l.aqT;$("aqS").textContent=l.aqS;$("wtT").textContent=l.wtT;$("wtS").textContent=l.wtS;
$("fdT").textContent=l.fdT;$("fdS").textContent=l.fdS;
document.querySelectorAll(".nav a").forEach(function(a){a.classList.toggle("act",a.dataset.r===rt||(rt==="page"&&a.dataset.r==="pages"))});
}

function doRoute(){
var x=(location.hash||"#home").slice(1),p=x.split("/"),r=p[0]||"home";
document.querySelectorAll(".sec").forEach(function(s){s.classList.remove("on")});
if(r==="page"&&p[1]){showPV(p[1]);rt="page"}
else{var s=$("s-"+(r||"home"));if(s){s.classList.add("on");rt=r}else{$("s-home").classList.add("on");rt="home"}}
document.querySelectorAll(".nav a").forEach(function(a){var d=a.dataset.r;a.classList.toggle("act",d===rt||(rt==="page"&&d==="pages"))});
$("nav").classList.remove("open");
}

async function loadData(){
try{var r=await fetch("assets/data/site-content.json",{cache:"no-store"});if(!r.ok)throw new Error("HTTP "+r.status);data=await r.json();$("ds").textContent=t("dOk");$("ds").className="hs ok"}
catch(e){data=DD;$("ds").textContent=t("dEr")+": "+e.message;$("ds").className="hs er"}
}

var WBI=[{id:"EN.ATM.CO2E.PC",k:"co2pc",u:"t"},{id:"EN.ATM.CO2E.KT",k:"co2kt",u:"kt"},{id:"EG.FEC.RNEW.ZS",k:"renew",u:"%"},{id:"AG.LND.FRST.ZS",k:"forest",u:"%"},{id:"SP.POP.TOTL",k:"pop",u:""},{id:"EN.ATM.PM25.MC.M3",k:"pm25",u:"\u00B5g/m\u00B3"}];
var wdIc={co2pc:'<path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"/>',co2kt:'<rect x="2" y="12" width="4" height="8"/><rect x="10" y="8" width="4" height="12"/><rect x="18" y="4" width="4" height="16"/>',renew:'<circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/>',forest:'<path d="M12 2L5 12h3l-2 5h4v5h4v-5h4l-2-5h3z"/>',pop:'<path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/>',pm25:'<path d="M9.59 4.59A2 2 0 1 1 11 8H2m10.59 11.41A2 2 0 1 0 14 16H2m15.73-8.27A2.5 2.5 0 1 1 19.5 12H2"/>'};
var wdCl={co2pc:"#ea580c",co2kt:"#dc2626",renew:"#16a34a",forest:"#0d9488",pop:"#7c3aed",pm25:"#d97706"};
async function loadWD(){$("wdL").textContent=t("dLd");try{var ps=WBI.map(function(w){return fetch("https://api.worldbank.org/v2/country/UZB/indicator/"+w.id+"?format=json&per_page=10").then(function(r){return r.json()}).then(function(d){var arr=(d&&d[1])||[];var v=arr.find(function(x){return x.value!==null});return{k:w.k,v:v?v.value:null,yr:v?v.date:null,u:w.u}}).catch(function(){return{k:w.k,v:null}})});var res=await Promise.all(ps);var valid=res.filter(function(r){return r.v!==null});if(valid.length){$("wdG").innerHTML=valid.map(function(d){var val=d.k==="pop"?(d.v/1e6).toFixed(1)+"M":d.k==="co2kt"?Math.round(d.v).toLocaleString():Number(d.v).toFixed(1);var cl=wdCl[d.k]||"var(--pr)";return'<div class="tile" style="border-left:4px solid '+cl+'"><div class="ti" style="background:'+cl+'18;color:'+cl+'"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">'+(wdIc[d.k]||"")+'</svg></div><div class="wv" style="color:'+cl+'">'+h(val)+'<span class="wu">'+h(d.u)+'</span></div><h3>'+t("wd_"+d.k)+'</h3><p class="ms">'+h(d.yr)+'</p></div>'}).join("")}else{$("wdG").innerHTML="<p class='mu'>"+t("noHL")+"</p>"}}catch(e){$("wdG").innerHTML="<p class='mu'>"+t("dEr")+"</p>"}}

var aqCats=[[50,"#16a34a",["Yaxshi","\u0425\u043E\u0440\u043E\u0448\u043E","Good"]],[100,"#d97706",["O\u2018rtacha","\u0423\u043C\u0435\u0440\u0435\u043D\u043D\u043E","Moderate"]],[150,"#ea580c",["Sezgirlar uchun zararli","\u0412\u0440\u0435\u0434\u043D\u043E \u0434\u043B\u044F \u0447\u0443\u0432\u0441\u0442\u0432.","Sensitive Groups"]],[200,"#dc2626",["Zararli","\u0412\u0440\u0435\u0434\u043D\u043E","Unhealthy"]],[300,"#7c3aed",["Juda zararli","\u041E\u0447\u0435\u043D\u044C \u0432\u0440\u0435\u0434\u043D\u043E","Very Unhealthy"]],[999,"#9f1239",["Xavfli","\u041E\u043F\u0430\u0441\u043D\u043E","Hazardous"]]];
function aqC(v){var li=lang==="uz"?0:lang==="ru"?1:2;for(var i=0;i<aqCats.length;i++)if(v<=aqCats[i][0])return{c:aqCats[i][1],t:aqCats[i][2][li]};return{c:"#9f1239",t:aqCats[5][2][li]}}
async function loadAQ(){$("aqW").innerHTML='<p class="mu">'+h(t("dLd"))+'</p>';try{var r=await fetch("https://air-quality-api.open-meteo.com/v1/air-quality?latitude=41.2995&longitude=69.2401&current=pm2_5,pm10,us_aqi");var d=await r.json();var aqi=d.current.us_aqi,pm25=d.current.pm2_5,pm10=d.current.pm10;var cat=aqC(aqi);var htm='<div style="display:flex;align-items:center;gap:1.2rem;margin-bottom:.8rem"><div class="aq-cir" style="background:'+cat.c+'"><div class="aq-n">'+aqi+'</div><div class="aq-l">AQI</div></div><div><div style="font-size:1rem;font-weight:700;color:'+cat.c+'">'+h(cat.t)+'</div><p class="ms" style="margin-top:.2rem">US EPA Air Quality Index</p></div></div>';htm+='<div style="display:grid;gap:.35rem"><div class="sr"><strong>PM2.5</strong><span>'+pm25+' \u00B5g/m\u00B3</span></div><div class="sr"><strong>PM10</strong><span>'+pm10+' \u00B5g/m\u00B3</span></div></div>';$("aqW").innerHTML=htm}catch(e){$("aqW").innerHTML='<p class="mu">'+t("dEr")+'</p>'}}
var wIc=function(c){if(c===0)return"\u2600\uFE0F";if(c<=3)return"\u26C5";if(c<=48)return"\uD83C\uDF2B\uFE0F";if(c<=57)return"\uD83C\uDF26\uFE0F";if(c<=67)return"\uD83C\uDF27\uFE0F";if(c<=77)return"\uD83C\uDF28\uFE0F";if(c<=82)return"\uD83C\uDF27\uFE0F";if(c<=86)return"\uD83C\uDF28\uFE0F";return"\u26C8\uFE0F"};
var wDs={0:["Ochiq havo","\u042F\u0441\u043D\u043E","Clear"],1:["Asosan ochiq","\u041C\u0430\u043B\u043E\u043E\u0431\u043B\u0430\u0447\u043D\u043E","Mainly clear"],2:["Qisman bulutli","\u041F\u0435\u0440\u0435\u043C. \u043E\u0431\u043B\u0430\u0447\u043D\u043E\u0441\u0442\u044C","Partly cloudy"],3:["Bulutli","\u041E\u0431\u043B\u0430\u0447\u043D\u043E","Overcast"],45:["Tuman","\u0422\u0443\u043C\u0430\u043D","Fog"],51:["Yengil yomg'ir","\u041C\u043E\u0440\u043E\u0441\u044C","Light drizzle"],61:["Yengil yomg'ir","\u041D\u0435\u0431. \u0434\u043E\u0436\u0434\u044C","Slight rain"],63:["Yomg'ir","\u0414\u043E\u0436\u0434\u044C","Moderate rain"],65:["Kuchli yomg'ir","\u0421\u0438\u043B\u044C\u043D\u044B\u0439 \u0434\u043E\u0436\u0434\u044C","Heavy rain"],71:["Yengil qor","\u041D\u0435\u0431. \u0441\u043D\u0435\u0433","Slight snow"],73:["Qor","\u0421\u043D\u0435\u0433","Moderate snow"],75:["Kuchli qor","\u0421\u0438\u043B\u044C\u043D\u044B\u0439 \u0441\u043D\u0435\u0433","Heavy snow"],80:["Yomg'ir","\u041B\u0438\u0432\u0435\u043D\u044C","Rain showers"],95:["Momaqaldiroq","\u0413\u0440\u043E\u0437\u0430","Thunderstorm"]};
function wDesc(c){var li=lang==="uz"?0:lang==="ru"?1:2;var k=Object.keys(wDs).map(Number).filter(function(x){return x<=c}).sort(function(a,b){return b-a})[0];return(wDs[k]||wDs[0])[li]}
async function loadWeather(){$("wtW").innerHTML='<p class="mu">'+h(t("dLd"))+'</p>';try{var r=await fetch("https://api.open-meteo.com/v1/forecast?latitude=41.2995&longitude=69.2401&current=temperature_2m,relative_humidity_2m,wind_speed_10m,weather_code&daily=temperature_2m_max,temperature_2m_min,weather_code&timezone=Asia%2FTashkent&forecast_days=5");var d=await r.json();var c=d.current;var htm='<div class="wt-bg" style="display:flex;align-items:center;gap:1rem"><div style="font-size:2.8rem;line-height:1">'+wIc(c.weather_code)+'</div><div><div class="wv" style="font-size:2rem">'+c.temperature_2m+'<span class="wu">\u00B0C</span></div><p class="ms">'+h(wDesc(c.weather_code))+'</p></div></div>';htm+='<div style="display:grid;gap:.35rem;margin-bottom:.7rem"><div class="sr"><strong>\uD83D\uDCA7</strong><span>'+c.relative_humidity_2m+'%</span></div><div class="sr"><strong>\uD83D\uDCA8</strong><span>'+c.wind_speed_10m+' km/h</span></div></div>';htm+='<div class="fc-grid">';for(var i=0;i<d.daily.time.length;i++){var dy=new Date(d.daily.time[i]+"T00:00:00");var dn=dy.toLocaleDateString(lang==="ru"?"ru-RU":lang==="en"?"en-US":"uz-UZ",{weekday:"short"});htm+='<div class="fc-day"><div class="ms">'+h(dn)+'</div><div style="font-size:1.2rem;margin:.2rem 0">'+wIc(d.daily.weather_code[i])+'</div><div style="font-size:.8rem;font-weight:600">'+Math.round(d.daily.temperature_2m_max[i])+'\u00B0</div><div class="ms">'+Math.round(d.daily.temperature_2m_min[i])+'\u00B0</div></div>'}htm+='</div>';$("wtW").innerHTML=htm}catch(e){$("wtW").innerHTML='<p class="mu">'+t("dEr")+'</p>'}}
var feedUrls={uz:"https://news.google.com/rss/search?q=O%27zbekiston+ekologiya+iqlim+atrof-muhit&hl=uz&gl=UZ",ru:"https://news.google.com/rss/search?q=%D1%83%D0%B7%D0%B1%D0%B5%D0%BA%D0%B8%D1%81%D1%82%D0%B0%D0%BD+%D1%8D%D0%BA%D0%BE%D0%BB%D0%BE%D0%B3%D0%B8%D1%8F+%D0%BA%D0%BB%D0%B8%D0%BC%D0%B0%D1%82&hl=ru&gl=UZ",en:"https://news.google.com/rss/search?q=uzbekistan+environment+ecology+climate&hl=en&gl=UZ"};
async function loadFeed(){$("fdR").classList.add("ld");$("fdTr").innerHTML='<p class="mu" style="min-width:200px;padding:.5rem">'+h(t("dLd"))+'</p>';try{var rssUrl=feedUrls[lang]||feedUrls.en;var r=await fetch("https://api.rss2json.com/v1/api.json?rss_url="+encodeURIComponent(rssUrl));var d=await r.json();if(d.status!=="ok"||!d.items||!d.items.length)throw new Error("empty");$("fdTr").innerHTML=d.items.slice(0,12).map(function(it){var dt=(it.pubDate||"").slice(0,10);var src=String(it.author||"").replace(/<[^>]*>/g,"").trim()||"";return'<a class="crs-c" href="'+a(it.link)+'" target="_blank" rel="noopener noreferrer"><h4>'+h(it.title)+'</h4><div class="ms"><span>'+h(src)+'</span><time>'+h(dt)+'</time></div></a>'}).join("")}catch(e){$("fdTr").innerHTML='<p class="mu" style="min-width:200px;padding:.5rem">'+h(t("fdN"))+'</p>'}$("fdR").classList.remove("ld")}
function renderAll(){rHome();rAbout();rDec();rNews();rSrc();rPubs();rPgL();rPubsPg()}
function tHL(){var orig=data.center.highlights||[];var tr=L[lang].hls;if(!tr||!tr.length)return orig;return orig.map(function(x,i){return tr[i]?{title:tr[i].title,detail:tr[i].detail,source:x.source}:x})}
function rHome(){
$("hD").textContent=t("cDesc")||data.center.description||"";$("hO").textContent=t("cOrg")||data.center.parentOrg||"";
$("sU").textContent=fd(data.lastUpdated);$("sD").textContent=String((data.decisions||[]).length);
$("sN").textContent=String((data.news||[]).length);$("sP").textContent=String(gPg().length);
rHL($("hl"),tHL());
}
function rAbout(){$("abO").textContent=t("cOrg")||data.center.parentOrg||"";$("abD").textContent=t("cDesc")||data.center.description||"";rHL($("abH"),tHL())}
function rHL(el,list){el.innerHTML=(list||[]).map(function(x){return'<article class="tile"><div class="ti"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2L2 7l10 5 10-5-10-5z"/><path d="M2 17l10 5 10-5"/><path d="M2 12l10 5 10-5"/></svg></div><h3>'+h(x.title)+'</h3><p>'+h(x.detail)+'</p><a target="_blank" rel="noopener noreferrer" href="'+a(x.source)+'">'+t("src")+' &rarr;</a></article>'}).join("")||"<p class='mu'>"+t("noHL")+"</p>"}

function rDec(){
var s=[].concat(data.decisions||[]).sort(function(a,b){return b.date.localeCompare(a.date)});
$("dcL").innerHTML=s.map(function(x){return'<article class="item"><div class="it"><span class="b '+cb(x.category)+'">'+h(x.category||"Qaror")+'</span><time>'+fd(x.date)+'</time></div><h3>'+h(x.title)+'</h3><p>'+h(x.summary)+'</p><a target="_blank" rel="noopener noreferrer" href="'+a(x.source)+'">'+t("src")+' &rarr;</a></article>'}).join("")||"<p class='mu'>"+t("noDc")+"</p>"
}

function rNews(){
var q=($("qi").value||"").trim().toLowerCase(),tg=$("tf").value||"all";
var list=[].concat(data.news||[]).sort(function(a,b){return b.date.localeCompare(a.date)}).filter(function(x){return tg==="all"||x.tag===tg}).filter(function(x){return!q||(x.title+" "+x.summary+" "+x.tag).toLowerCase().includes(q)});
$("nwL").innerHTML=list.map(function(x){return'<article class="item"><div class="it"><time>'+fd(x.date)+'</time><span class="b '+tb2(x.tag)+'">'+h(tt(x.tag))+'</span></div><h3>'+h(x.title)+'</h3><p>'+h(x.summary)+'</p><a target="_blank" rel="noopener noreferrer" href="'+a(x.source)+'">'+t("src")+' &rarr;</a></article>'}).join("")||"<div class='mu'>"+t("noNw")+"</div>"
}

function rSrc(){
var j=(data.sources||[]).map(function(s){return{title:s.title,url:s.url,custom:false}});
var c=gCS().map(function(s){return{id:s.id,title:s.title,url:s.url,custom:true}});
var all=j.concat(c);
$("scL").innerHTML=all.length?all.map(function(s){return'<li><div class="si2"><strong>'+h(s.title)+'</strong><a target="_blank" rel="noopener noreferrer" href="'+a(s.url)+'">'+h(s.url)+'</a></div>'+(s.custom&&adm?'<button class="bsm bd2" data-ds="'+a(s.id)+'">'+t("del")+'</button>':"")+"</li>"}).join(""):"<li>"+t("noSc")+"</li>"
}

function rPubs(){var list=gPu();$("puL").innerHTML=list.length?list.map(function(p){return pHA(p,true)}).join(""):"<div class='mu'>"+t("noPu")+"</div>"}
function pHA(p,cp){var im=(p.images||[]).map(function(i){return'<img src="'+a(i.url)+'" alt="'+a(i.name||"")+'">'}).join("");
var btns="";if(cp){btns='<button class="bsm" data-pr="'+a(p.id)+'">'+t("pr")+'</button><button class="bsm bp2" data-ep="'+a(p.id)+'">'+t("edt")+'</button><button class="bsm bd2" data-dpu="'+a(p.id)+'">'+t("del")+'</button>'}
return'<article class="item acc"><div class="acc-hd"><div style="min-width:0"><h3>'+h(p.title)+'</h3><time class="ms">'+fd((p.createdAt||"").slice(0,10))+'</time></div><div style="display:flex;align-items:center;gap:.35rem">'+btns+'<svg class="acc-tg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg></div></div><div class="acc-bd"><div class="pc">'+(p.bodyHtml||"<p>"+t("noTx")+"</p>")+"</div>"+(im?'<div class="ig">'+im+"</div>":"")+"</div></article>"}
function pH(p){var im=(p.images||[]).map(function(i){return'<img src="'+a(i.url)+'" alt="'+a(i.name||"")+'">'}).join("");
return'<article class="item"><div class="it"><div><h3>'+h(p.title)+'</h3><time class="ms">'+fd((p.createdAt||"").slice(0,10))+'</time></div></div><div class="pc">'+(p.bodyHtml||"<p>"+t("noTx")+"</p>")+"</div>"+(im?'<div class="ig">'+im+"</div>":"")+"</article>"}
function rPubsPg(){var list=gPu();$("pbL").innerHTML=list.length?list.map(function(p){return pHA(p,adm)}).join(""):"<div class='mu'>"+t("noPu")+"</div>"}

function rPgL(){
var pgs=gPg();$("sP").textContent=String(pgs.length);
$("pgL").innerHTML=pgs.length?pgs.map(function(p){return'<article class="pgc"><h3><a href="#page/'+a(p.slug)+'">'+h(p.title)+'</a></h3><div class="slug">#page/'+h(p.slug)+'</div><time>'+fd((p.createdAt||"").slice(0,10))+"</time>"+(adm?'<div class="pgca"><a href="#page/'+a(p.slug)+'" class="bsm" style="text-decoration:none">'+t("opn")+'</a><button class="bsm bp2" data-epg="'+a(p.id)+'">'+t("edt")+'</button><button class="bsm bd2" data-dp="'+a(p.id)+'">'+t("del")+"</button></div>":'<div style="margin-top:.35rem"><a href="#page/'+a(p.slug)+'">'+t("opn")+" &rarr;</a></div>")+"</article>"}).join(""):"<div class='mu'>"+t("noPg")+"</div>"
}

function showPV(slug){
var pg=gPg().find(function(p){return p.slug===slug});
if(!pg){$("s-home").classList.add("on");toast(t("pNF")+": "+slug,"er");return}
$("pvT").textContent=pg.title;$("pvD").textContent=fd((pg.createdAt||"").slice(0,10));
$("pvS").textContent="slug: "+pg.slug;$("pvB").innerHTML=pg.bodyHtml||"<p>"+t("noTx")+"</p>";
$("pvI").innerHTML=(pg.images||[]).map(function(i){return'<img src="'+a(i.url)+'" alt="'+a(i.name||"")+'">'}).join("");
$("s-page-view").classList.add("on");
}

function bindEv(){
$("thm").addEventListener("click",togTheme);
$("hmb").addEventListener("click",function(){$("nav").classList.toggle("open")});
$("ls").addEventListener("click",function(e){var b=e.target.closest("[data-lang]");if(b)setLang(b.dataset.lang)});
$("qi").addEventListener("input",rNews);$("tf").addEventListener("change",rNews);
$("fdR").addEventListener("click",loadFeed);
$("lf").addEventListener("submit",function(e){e.preventDefault();var u=$("lu").value.trim(),p=$("lp").value;
if(u===U&&p===P){adm=true;localStorage.setItem(SK,"1");sLM(t("lOk"),"ok");toast(t("lOk"),"ok")}
else{adm=false;localStorage.removeItem(SK);sLM(t("lEr"),"er")};admSt()});
$("lob").addEventListener("click",function(){adm=false;localStorage.removeItem(SK);sLM(t("loM"),"wn");toast(t("loM"),"wn");admSt()});
$("cpb").addEventListener("click",cancelEdit);$("cgb").addEventListener("click",cancelEdit);
bindTabs();
$("ppb").addEventListener("click",async function(){try{var d=await bD("pub");$("pvP").innerHTML=pH(d);toast("OK","ok")}catch(e){toast(e.message,"er")}});
$("pf").addEventListener("submit",async function(e){e.preventDefault();if(!adm){toast(t("aO"),"er");return}
try{var d=await bD("pub");var l=gPu();if(ePub){var idx=l.findIndex(function(x){return x.id===ePub});if(idx===-1)throw new Error(t("pNF"));if(!d.bodyHtml.trim())d.bodyHtml=l[idx].bodyHtml;if(!d.images.length)d.images=l[idx].images||[];d.id=ePub;d.createdAt=l[idx].createdAt;l[idx]=d;ePub=null;updEdUI()}else{if(!d.bodyHtml.trim())throw new Error(t("pE"));l.unshift(d)}localStorage.setItem(PK,JSON.stringify(l));$("pf").reset();$("pvP").innerHTML="<span class='mu'>"+h(t("pvE"))+"</span>";toast(t("pSv"),"ok");rPubs();rPubsPg()}catch(e){toast(e.message,"er")}});
$("gt").addEventListener("input",function(){if(!$("gs").dataset.m)$("gs").value=ms($("gt").value)});
$("gs").addEventListener("input",function(){$("gs").dataset.m="1";$("gs").value=ms($("gs").value)});
$("gs").addEventListener("blur",function(){if(!$("gs").value.trim())delete $("gs").dataset.m});
$("gpb").addEventListener("click",async function(){try{var d=await bD("page");$("pvP").innerHTML="<h3>"+h(d.title)+'</h3><div class="ms">slug: '+h(d.slug)+'</div><hr style="margin:.4rem 0;border-color:var(--bd)"><div class="pc">'+d.bodyHtml+"</div>";toast("OK","ok")}catch(e){toast(e.message,"er")}});
$("gf").addEventListener("submit",async function(e){e.preventDefault();if(!adm){toast(t("aO"),"er");return}
try{var d=await bD("page");if(!d.slug)throw new Error(t("slR"));var pgs=gPg();if(ePg){var idx=pgs.findIndex(function(p){return p.id===ePg});if(idx===-1)throw new Error(t("pNF"));if(!d.bodyHtml.trim())d.bodyHtml=pgs[idx].bodyHtml;if(!d.images.length)d.images=pgs[idx].images||[];d.id=ePg;d.createdAt=pgs[idx].createdAt;pgs[idx]=d;ePg=null;updEdUI()}else{if(pgs.some(function(p){return p.slug===d.slug}))throw new Error(t("slE")+": "+d.slug);pgs.unshift(d)}localStorage.setItem(GK,JSON.stringify(pgs));$("gf").reset();delete $("gs").dataset.m;$("pvP").innerHTML="<span class='mu'>"+h(t("pvE"))+"</span>";toast(t("pgSv"),"ok");rPgL();rPubsPg()}catch(e){toast(e.message,"er")}});
$("sf").addEventListener("submit",function(e){e.preventDefault();if(!adm){toast(t("aO"),"er");return}
var ti=($("st2").value||"").trim(),ur=($("su").value||"").trim();
if(!ti||!ur){toast(t("sEm"),"er");return}
var list=gCS();list.push({id:mi(),title:ti,url:ur});localStorage.setItem(CK,JSON.stringify(list));$("sf").reset();toast(t("sSv"),"ok");rSrc()});
function hPC(e){var b=e.target.closest("[data-pr]");if(b)prPub(b.dataset.pr);var d=e.target.closest("[data-dpu]");if(d&&adm){if(!confirm(t("dlPu")))return;var l=gPu().filter(function(x){return x.id!==d.dataset.dpu});localStorage.setItem(PK,JSON.stringify(l));toast(t("del"),"wn");rPubs();rPubsPg()}var ed=e.target.closest("[data-ep]");if(ed&&adm)startEditPub(ed.dataset.ep)}
$("puL").addEventListener("click",hPC);$("pbL").addEventListener("click",hPC);
$("pgL").addEventListener("click",function(e){var b=e.target.closest("[data-dp]");if(b&&adm){if(!confirm(t("dlC")))return;var pgs=gPg().filter(function(p){return p.id!==b.dataset.dp});localStorage.setItem(GK,JSON.stringify(pgs));toast(t("del"),"wn");rPgL()}var ed=e.target.closest("[data-epg]");if(ed&&adm)startEditPg(ed.dataset.epg)});
$("scL").addEventListener("click",function(e){var b=e.target.closest("[data-ds]");if(b&&adm){var list=gCS().filter(function(s){return s.id!==b.dataset.ds});localStorage.setItem(CK,JSON.stringify(list));toast(t("del"),"wn");rSrc()}});
document.addEventListener("click",function(e){if(e.target.closest("[data-pr],[data-ep],[data-dpu],[data-dp],[data-epg],[data-ds]"))return;var hd=e.target.closest(".acc-hd");if(hd){var it=hd.closest(".item.acc");if(it)it.classList.toggle("open")}});
}

function bindTabs(){document.querySelectorAll(".tb").forEach(function(btn){btn.addEventListener("click",function(){document.querySelectorAll(".tb").forEach(function(b){b.classList.remove("act")});document.querySelectorAll(".tp").forEach(function(p){p.classList.remove("on")});btn.classList.add("act");$(btn.dataset.t).classList.add("on")})})}
function actTab(id){document.querySelectorAll(".tb").forEach(function(b){b.classList.toggle("act",b.dataset.t===id)});document.querySelectorAll(".tp").forEach(function(p){p.classList.toggle("on",p.id===id)})}
function startEditPub(id){var p=gPu().find(function(x){return x.id===id});if(!p)return;ePub=id;location.hash="admin";setTimeout(function(){actTab("t1");$("pt").value=p.title;$("pn").value="";updEdUI()},50)}
function startEditPg(id){var p=gPg().find(function(x){return x.id===id});if(!p)return;ePg=id;location.hash="admin";setTimeout(function(){actTab("t2");$("gt").value=p.title;$("gs").value=p.slug;$("gs").dataset.m="1";$("gn").value="";updEdUI()},50)}
function cancelEdit(){ePub=null;ePg=null;$("pf").reset();$("gf").reset();delete $("gs").dataset.m;updEdUI()}
function updEdUI(){if(ePub){$("psb").textContent=t("upd");$("t1T").textContent=t("edMode")+": "+t("tb1");$("cpb").classList.remove("hid");$("cpb").textContent=t("cncl")}else{$("psb").textContent=t("sPb");$("t1T").textContent=t("t1T");$("cpb").classList.add("hid")}if(ePg){$("gsb").textContent=t("upd");$("t2T").textContent=t("edMode")+": "+t("tb2");$("cgb").classList.remove("hid");$("cgb").textContent=t("cncl")}else{$("gsb").textContent=t("sPg");$("t2T").textContent=t("t2T");$("cgb").classList.add("hid")}}
function admSt(){if(adm){$("adG").classList.add("hid");$("adP").classList.remove("hid")}else{$("adG").classList.remove("hid");$("adP").classList.add("hid");ePub=null;ePg=null}rPubs();rPgL();rSrc();rPubsPg()}
function sLM(m,c){$("lM").textContent=m;$("lM").className="st "+c}

async function bD(mode){
var ip=mode==="pub";
var tE=ip?$("pt"):$("gt"),dE=ip?$("pd"):$("gd"),iE=ip?$("pi"):$("gi"),nE=ip?$("pn"):$("gn");
var title=(tE.value||"").trim();if(!title)throw new Error(t("tR"));
var body="",file=dE.files[0];
if(file){var n=file.name.toLowerCase();
if(n.endsWith(".docx")){if(!window.mammoth)throw new Error(t("prE"));var r=await window.mammoth.convertToHtml({arrayBuffer:await file.arrayBuffer()});body=sn(r.value||"")}
else if(n.endsWith(".txt"))body=tp(await file.text());
else if(n.endsWith(".doc"))throw new Error(t("dxE"));
else throw new Error(t("flE"))}
var note=(nE.value||"").trim();if(note)body+=tp(note);
var images=await ri(iE.files);
var draft={id:mi(),title:title,createdAt:new Date().toISOString(),bodyHtml:sn(body),images:images};
if(!ip)draft.slug=$("gs").value.trim()||ms(title);
return draft;
}
function prPub(id){if(!adm){alert(t("aO"));return}var p=gPu().find(function(x){return x.id===id});if(!p){alert(t("pNF"));return}$("printArea").innerHTML=pH(p);$("printArea").classList.remove("hid");window.print();$("printArea").classList.add("hid");$("printArea").innerHTML=""}

function gPu(){try{var x=JSON.parse(localStorage.getItem(PK)||"[]");return Array.isArray(x)?x:[]}catch(e){return[]}}
function gPg(){try{var x=JSON.parse(localStorage.getItem(GK)||"[]");return Array.isArray(x)?x:[]}catch(e){return[]}}
function gCS(){try{var x=JSON.parse(localStorage.getItem(CK)||"[]");return Array.isArray(x)?x:[]}catch(e){return[]}}
function ri(fs){return Promise.all(Array.from(fs||[]).map(function(f){return new Promise(function(ok,bad){var r=new FileReader();r.onload=function(){ok({name:f.name,url:String(r.result||"")})};r.onerror=function(){bad(new Error(t("iE")))};r.readAsDataURL(f)})}))}
function ms(s){return String(s||"").toLowerCase().replace(/[^\w\s-]/g,"").replace(/[\s_]+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"").slice(0,80)}
function toast(m,tp2){var d=document.createElement("div");d.className="toast "+(tp2||"ok");d.textContent=m;$("toasts").appendChild(d);setTimeout(function(){d.style.opacity="0";d.style.transition="opacity .3s";setTimeout(function(){d.remove()},300)},3000)}
function tp(s){var c=String(s||"").replace(/\r\n/g,"\n").trim();return c?"<p>"+h(c).split(/\n{2,}/).map(function(x){return x.replace(/\n/g,"<br>")}).join("</p><p>")+"</p>":""}
function sn(x){return String(x||"").replace(/<script[\s\S]*?>[\s\S]*?<\/script>/gi,"").replace(/\son\w+="[^"]*"/gi,"")}
function fd(d){if(!d)return"-";var x=new Date(d+"T00:00:00");if(isNaN(x.getTime()))return d;var loc=lang==="ru"?"ru-RU":lang==="en"?"en-US":"uz-UZ";return x.toLocaleDateString(loc,{year:"numeric",month:"long",day:"2-digit"})}
function mi(){return"id_"+Date.now()+"_"+Math.random().toString(16).slice(2,8)}
function h(v){return String(v||"").replace(/[&<>"']/g,function(m){return{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}[m]})}
function a(v){return h(v).replace(/`/g,"")}
})();
</script>
</body>
</html>
